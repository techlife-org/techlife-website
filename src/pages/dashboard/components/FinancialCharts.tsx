import React from 'react';\nimport {\n  LineChart,\n  Line,\n  BarChart,\n  Bar,\n  PieChart,\n  Pie,\n  Cell,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer\n} from 'recharts';\nimport { TrendingUp, BarChart3, PieChart as PieChartIcon } from 'lucide-react';\nimport { MonthlyTrend, TrendData } from '@/types/dashboard';\n\ninterface FinancialChartsProps {\n  monthlyTrends: MonthlyTrend[];\n  departmentSpending?: TrendData[];\n  isLoading?: boolean;\n}\n\nconst FinancialCharts: React.FC<FinancialChartsProps> = ({\n  monthlyTrends,\n  departmentSpending = [\n    { label: 'Operations', value: 1200000 },\n    { label: 'IT', value: 800000 },\n    { label: 'HR', value: 400000 },\n    { label: 'Marketing', value: 600000 },\n    { label: 'Finance', value: 300000 }\n  ],\n  isLoading = false\n}) => {\n  const formatCurrency = (value: number) => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0,\n    }).format(value);\n  };\n\n  const formatCurrencyShort = (value: number) => {\n    if (value >= 1000000) {\n      return `$${(value / 1000000).toFixed(1)}M`;\n    } else if (value >= 1000) {\n      return `$${(value / 1000).toFixed(0)}K`;\n    }\n    return formatCurrency(value);\n  };\n\n  const COLORS = ['#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6'];\n\n  if (isLoading) {\n    return (\n      <div className=\"bg-white rounded-lg shadow-md p-6 animate-pulse\">\n        <div className=\"h-4 bg-gray-200 rounded w-1/3 mb-6\"></div>\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          <div className=\"h-64 bg-gray-200 rounded\"></div>\n          <div className=\"h-64 bg-gray-200 rounded\"></div>\n        </div>\n        <div className=\"mt-6 h-64 bg-gray-200 rounded\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow duration-200\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <h3 className=\"text-lg font-semibold text-gray-800\">Financial Analytics</h3>\n        <div className=\"flex items-center space-x-2 text-sm text-gray-500\">\n          <TrendingUp className=\"h-4 w-4\" />\n          <span>Real-time data</span>\n        </div>\n      </div>\n\n      {/* Budget Utilization Trend - Line Chart */}\n      <div className=\"mb-8\">\n        <div className=\"flex items-center mb-4\">\n          <TrendingUp className=\"h-5 w-5 text-blue-600 mr-2\" />\n          <h4 className=\"text-md font-medium text-gray-700\">Budget Utilization Trend</h4>\n        </div>\n        <div className=\"h-64\">\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\n            <LineChart data={monthlyTrends}>\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f0f0f0\" />\n              <XAxis \n                dataKey=\"month\" \n                stroke=\"#6b7280\"\n                fontSize={12}\n              />\n              <YAxis \n                stroke=\"#6b7280\"\n                fontSize={12}\n                tickFormatter={formatCurrencyShort}\n              />\n              <Tooltip \n                formatter={(value: number, name: string) => [\n                  formatCurrency(value), \n                  name === 'budget' ? 'Budget' : name === 'expenditure' ? 'Expenditure' : 'Variance'\n                ]}\n                labelStyle={{ color: '#374151' }}\n                contentStyle={{ \n                  backgroundColor: '#ffffff', \n                  border: '1px solid #e5e7eb',\n                  borderRadius: '8px'\n                }}\n              />\n              <Legend />\n              <Line \n                type=\"monotone\" \n                dataKey=\"budget\" \n                stroke=\"#3B82F6\" \n                strokeWidth={3}\n                dot={{ fill: '#3B82F6', strokeWidth: 2, r: 4 }}\n                activeDot={{ r: 6, stroke: '#3B82F6', strokeWidth: 2 }}\n              />\n              <Line \n                type=\"monotone\" \n                dataKey=\"expenditure\" \n                stroke=\"#10B981\" \n                strokeWidth={3}\n                dot={{ fill: '#10B981', strokeWidth: 2, r: 4 }}\n                activeDot={{ r: 6, stroke: '#10B981', strokeWidth: 2 }}\n              />\n            </LineChart>\n          </ResponsiveContainer>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Department-wise Spending - Pie Chart */}\n        <div>\n          <div className=\"flex items-center mb-4\">\n            <PieChartIcon className=\"h-5 w-5 text-green-600 mr-2\" />\n            <h4 className=\"text-md font-medium text-gray-700\">Department Spending</h4>\n          </div>\n          <div className=\"h-64\">\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\n              <PieChart>\n                <Pie\n                  data={departmentSpending}\n                  cx=\"50%\"\n                  cy=\"50%\"\n                  labelLine={false}\n                  label={({ label, percent }) => `${label} ${(percent * 100).toFixed(0)}%`}\n                  outerRadius={80}\n                  fill=\"#8884d8\"\n                  dataKey=\"value\"\n                >\n                  {departmentSpending.map((entry, index) => (\n                    <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                  ))}\n                </Pie>\n                <Tooltip \n                  formatter={(value: number) => [formatCurrency(value), 'Spending']}\n                  contentStyle={{ \n                    backgroundColor: '#ffffff', \n                    border: '1px solid #e5e7eb',\n                    borderRadius: '8px'\n                  }}\n                />\n              </PieChart>\n            </ResponsiveContainer>\n          </div>\n        </div>\n\n        {/* Monthly Expenditure vs Budget - Bar Chart */}\n        <div>\n          <div className=\"flex items-center mb-4\">\n            <BarChart3 className=\"h-5 w-5 text-purple-600 mr-2\" />\n            <h4 className=\"text-md font-medium text-gray-700\">Monthly Comparison</h4>\n          </div>\n          <div className=\"h-64\">\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\n              <BarChart data={monthlyTrends}>\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#f0f0f0\" />\n                <XAxis \n                  dataKey=\"month\" \n                  stroke=\"#6b7280\"\n                  fontSize={12}\n                />\n                <YAxis \n                  stroke=\"#6b7280\"\n                  fontSize={12}\n                  tickFormatter={formatCurrencyShort}\n                />\n                <Tooltip \n                  formatter={(value: number, name: string) => [\n                    formatCurrency(value), \n                    name === 'budget' ? 'Budget' : 'Expenditure'\n                  ]}\n                  contentStyle={{ \n                    backgroundColor: '#ffffff', \n                    border: '1px solid #e5e7eb',\n                    borderRadius: '8px'\n                  }}\n                />\n                <Legend />\n                <Bar \n                  dataKey=\"budget\" \n                  fill=\"#3B82F6\" \n                  radius={[4, 4, 0, 0]}\n                  name=\"Budget\"\n                />\n                <Bar \n                  dataKey=\"expenditure\" \n                  fill=\"#10B981\" \n                  radius={[4, 4, 0, 0]}\n                  name=\"Expenditure\"\n                />\n              </BarChart>\n            </ResponsiveContainer>\n          </div>\n        </div>\n      </div>\n\n      {/* Chart Summary */}\n      <div className=\"mt-6 pt-4 border-t border-gray-100\">\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-center\">\n          <div className=\"p-3 bg-blue-50 rounded-lg\">\n            <div className=\"text-xs text-blue-600 font-medium mb-1\">Avg Monthly Budget</div>\n            <div className=\"text-lg font-bold text-blue-700\">\n              {formatCurrencyShort(\n                monthlyTrends.reduce((sum, trend) => sum + trend.budget, 0) / monthlyTrends.length\n              )}\n            </div>\n          </div>\n          <div className=\"p-3 bg-green-50 rounded-lg\">\n            <div className=\"text-xs text-green-600 font-medium mb-1\">Avg Monthly Spending</div>\n            <div className=\"text-lg font-bold text-green-700\">\n              {formatCurrencyShort(\n                monthlyTrends.reduce((sum, trend) => sum + trend.expenditure, 0) / monthlyTrends.length\n              )}\n            </div>\n          </div>\n          <div className=\"p-3 bg-purple-50 rounded-lg\">\n            <div className=\"text-xs text-purple-600 font-medium mb-1\">Total Variance</div>\n            <div className=\"text-lg font-bold text-purple-700\">\n              {formatCurrencyShort(\n                monthlyTrends.reduce((sum, trend) => sum + trend.variance, 0)\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default FinancialCharts;